# Базы данных

## 1. Введение в базы данных

### Что такое база данных (БД)?
**База данных (БД)** — это структурированное хранилище данных, организованное таким образом, чтобы можно было легко управлять, изменять и извлекать данные. Базы данных могут быть разных типов, но они всегда используются для работы с большими объемами информации, начиная от личных данных пользователей, заканчивая транзакциями в финансовых системах.

### Виды баз данных:
1. **SQL (реляционные базы данных)**: Используют таблицы с четкой структурой (строки и столбцы) для хранения данных.
2. **NoSQL (нереляционные базы данных)**: Не имеют фиксированной структуры, что делает их гибкими для хранения неструктурированных данных.

---

## 2. SQL и NoSQL базы данных

### SQL (реляционные базы данных)
**SQL** (Structured Query Language) — это язык для работы с реляционными базами данных. Данные хранятся в таблицах, где строки представляют записи, а столбцы — поля с различными типами данных.

#### Преимущества SQL баз данных:
- Четкая структура данных.
- Строгая типизация данных.
- Возможность использовать связи между таблицами.
- Поддержка ACID (Atomicity, Consistency, Isolation, Durability).

#### Примеры SQL баз данных:
- PostgreSQL
- MySQL
- SQLite
- Microsoft SQL Server

### NoSQL (нереляционные базы данных)
**NoSQL** — это базы данных, которые не используют традиционную реляционную модель. Они чаще всего работают с неструктурированными или полуструктурированными данными, такими как JSON или XML.

#### Преимущества NoSQL баз данных:
- Гибкость структуры данных.
- Возможность горизонтального масштабирования.
- Легкость работы с большими данными (Big Data).

#### Примеры NoSQL баз данных:
- MongoDB
- Cassandra
- Redis
- CouchDB

---

## 3. Установка PostgreSQL и pgAdmin на Windows

### Шаг 1: Скачивание PostgreSQL
1. Перейдите на официальный сайт [PostgreSQL](https://www.postgresql.org/download/windows/).
2. Нажмите **Download the installer** для Windows.
3. Скачайте установочный файл.

### Шаг 2: Установка PostgreSQL
1. Откройте установочный файл.
2. Следуйте инструкциям мастера установки:
   - Выберите компоненты для установки (PostgreSQL Server, pgAdmin 4).
   - Задайте пароль для пользователя **postgres**.
   - Оставьте порт по умолчанию (5432).
3. Завершите установку.

### Шаг 3: Настройка pgAdmin
1. Откройте **pgAdmin 4** через меню «Пуск».
2. Создайте подключение к серверу:
   - Нажмите правой кнопкой мыши на **Servers** и выберите **Register > Server**.
   - Укажите имя сервера и введите данные для подключения (hostname: `localhost`, порт: `5432`, username: `postgres`, password: ваш пароль).

Теперь PostgreSQL и pgAdmin установлены и готовы к работе.

---

## 4. Язык SQL

### Основные SQL команды

SQL предоставляет набор команд для управления данными в реляционных базах данных. Ниже приведены основные операции с примерами.

### 4.1. Создание таблиц (CREATE TABLE)
Создание таблицы — это процесс задания структуры данных. Каждый столбец в таблице должен иметь тип данных.

#### Пример создания таблицы:
```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100),
  email VARCHAR(100) UNIQUE,
  age INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```
- `SERIAL` — автоматически увеличиваемое целое число.
- `PRIMARY KEY` — уникальный идентификатор для каждой строки.
- `VARCHAR` — строковый тип данных с максимальной длиной.
- `TIMESTAMP` — тип данных для хранения даты и времени.
- NULL  - не обязательное поле
- BOOLEAN - True\False

### 4.2. Вставка данных (INSERT INTO)

Команда `INSERT INTO` используется для добавления данных в таблицу.

#### Пример:
```sql
INSERT INTO users (name, email, age) 
VALUES ('John Doe', 'john@example.com', 30);
```
### 4.3. Получение данных (SELECT)

Команда `SELECT` извлекает данные из таблицы.

#### Пример:
```sql
SELECT * FROM users;
```
Этот запрос вернет все строки и столбцы из таблицы `users`.

#### Фильтрация данных с помощью `WHERE`:
```sql
SELECT name, email 
FROM users 
WHERE age > 25;

```

Этот запрос вернет только те строки, где возраст больше 25 лет.

### 4.4. Обновление данных (UPDATE)

Команда `UPDATE` обновляет существующие записи в таблице.

#### Пример:
```sql
UPDATE users 
SET age = 31 
WHERE email = 'john@example.com';

```

Этот запрос изменит возраст пользователя с email `john@example.com` на 31.

### 4.5. Удаление данных (DELETE)

Команда `DELETE` удаляет данные из таблицы.

#### Пример:

```sql
DELETE FROM users 
WHERE id = 1;
```

Этот запрос удалит пользователя с id `1`.

## 5. Агрегатные функции в SQL

Агрегатные функции в SQL используются для выполнения вычислений над набором данных.

### Основные агрегатные функции:

1. **COUNT()** — подсчитывает количество строк.
```sql
SELECT COUNT(*) FROM users;
```

2. **SUM()** — возвращает сумму значений в столбце.
```sql
SELECT SUM(age) FROM users;
```

3. **AVG()** — возвращает среднее значение столбца.
```sql
SELECT AVG(age) FROM users;
```

4. **MIN()** — возвращает минимальное значение.
```sql
SELECT MIN(age) FROM users;
```

5. **MAX()** — возвращает максимальное значение.
```sql
SELECT MAX(age) FROM users;
```

### Группировка данных (GROUP BY)

`GROUP BY` используется для группировки строк по одному или нескольким столбцам.

#### Пример:
```sql
SELECT age, COUNT(*) 
FROM users 
GROUP BY age;
```

Этот запрос сгруппирует пользователей по возрастам и покажет количество пользователей для каждого возраста.

### Cортировка данных (ORDER BY)

`ORDER BY` используется для cортировки данным по полям.

#### Пример:
```sql
SELECT поля_таблиц FROM наименование_таблицы
WHERE ...
ORDER BY столбец_1 [ASC | DESC][, столбец_n [ASC | DESC]]
```

Где ASC и DESC - направление сортировки:

- ASC - сортировка по возрастанию (по умолчанию)
- DESC - сортировка по убыванию

Например, выведем названия авиакомпаний в алфавитном порядке из таблицы Company:


```sql
SELECT * FROM users ORDER BY age ASC;
```
### Условия для групп (HAVING)

`HAVING` позволяет фильтровать группы после выполнения группировки.

#### Пример:

```sql
SELECT age, COUNT(*) 
FROM users 
GROUP BY age 
HAVING COUNT(*) > 1;

```

Этот запрос вернет только те возрастные группы, где более одного пользователя.

---

## 6. Заключение

SQL — это язык для работы с реляционными базами данных, который предоставляет мощные возможности для управления структурированными данными. PostgreSQL — одна из самых популярных реализаций SQL, предлагающая надежную платформу для работы с данными. Установив PostgreSQL и pgAdmin на Windows, вы можете начать работать с базами данных и использовать команды SQL для создания, изменения и анализа данных.