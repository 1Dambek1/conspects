# Урок: Авторизация на Backend

В этом уроке подробно рассмотрим, что такое авторизация, её механизмы и как реализовать её на стороне бэкенда. Особое внимание уделим токенам JWT, их созданию, валидации, а также реализации с FastAPI.

## 1. Основные Принципы Авторизации

### Что такое Авторизация?
- **Авторизация** — это процесс, позволяющий определить, к каким ресурсам пользователь имеет доступ после того, как его личность подтверждена с помощью аутентификации.
- Авторизация используется для:
  - Ограничения доступа к конфиденциальной информации.
  - Управления действиями, которые пользователи могут выполнять в системе (например, создание, чтение, обновление и удаление данных).

### Различие Аутентификации и Авторизации
- **Аутентификация** — это процесс подтверждения личности пользователя (например, проверка имени пользователя и пароля).
- **Авторизация** — это определение прав доступа пользователя после аутентификации (например, предоставление доступа к определенным данным или маршрутам).

## 2. Основные Подходы к Авторизации

### Роли и Разрешения
- **Роли (Roles)**: Набор прав доступа, назначаемых пользователям. Примеры ролей — `admin`, `user`, `manager`.
- **Разрешения (Permissions)**: Более детальные права, позволяющие управлять конкретными действиями, например, `просмотр`, `создание`, `удаление`.
- **RBAC (Role-Based Access Control)**: Контроль доступа на основе ролей. Пользователям назначаются роли, а ролям — разрешения.
- **ABAC (Attribute-Based Access Control)**: Контроль доступа на основе атрибутов пользователя, например, его должности или отдела.

### Сессионная и Токен-авторизация
- **Сессионная авторизация**: При успешной аутентификации сервер создаёт сессию с уникальным идентификатором и сохраняет его. При каждом запросе сессия проверяется для авторизации пользователя.
- **Токен-авторизация**: После аутентификации сервер генерирует токен (например, JWT), который содержит права пользователя. Этот токен передается с каждым запросом и проверяется для авторизации.

## 3. JWT (JSON Web Token): Основы

### Что такое JWT?
- **JWT** — это стандарт для безопасной передачи информации между двумя сторонами в формате JSON.
- Используется для:
  - Аутентификации и авторизации.
  - Обеспечения целостности данных с помощью подписи.

### Структура JWT
JWT состоит из трех частей, разделенных точками (`.`):
1. **Header** — Заголовок, определяющий алгоритм шифрования и тип токена.
2. **Payload** — Полезная нагрузка, содержащая данные (claims), например, `user_id`, `role`.
3. **Signature** — Подпись, которая создается с использованием секретного или приватного ключа. Подтверждает целостность и подлинность токена.

### Пример структуры JWT:
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoxMjMsInJvbGUiOiJhZG1pbiIsImV4cCI6MTYzMDU1ODQwMH0.abc123def456ghi789

Пример реализации [[Авторизация/pyjwt]]
